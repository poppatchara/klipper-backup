[bed_mesh]
speed: 400
horizontal_move_z: 5
mesh_min: 10,10
mesh_max: 290, 290
probe_count: 7,7
algorithm: bicubic
fade_start: 1
fade_end: 10
move_check_distance: 3
split_delta_z: 0.0125
mesh_pps: 3,3

# Overrided by KAMP
# [gcode_macro BED_MESH_CALIBRATE]
# rename_existing: BASE_BED_MESH_CALIBRATE
# gcode:
#     {% set bedtemp = params.BED|default(65)|int %}
#     {% set extrudertemp = params.EXTRUDER|default(150)|int %}
#     {% set profile = params.PROFILE|default("default")|string %}

#     RESPOND TYPE=command MSG="Starting BED_MESH_CALIBRATE for \"{profile}\""   
#     RESPOND TYPE=command MSG="Setting Probing Environment: {extrudertemp}c E/ {bedtemp}c B"    
#     SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={bedtemp}
#     SET_HEATER_TEMPERATURE HEATER=extruder TARGET={extrudertemp}
#     M109 S{extrudertemp} ; Extruder
#     M190 S{bedtemp}  ; Bed

#     status_meshing

#     BED_MESH_CLEAR
#     G32
#     #the original gcode
#     BASE_BED_MESH_CALIBRATE PROFILE={profile}
#     # BED_MESH_PROFILE SAVE={profile}
#     # BED_MESH_PROFILE LOAD={profile}
#     #after the original gcode
#     PARK_MID
#     status_ready

[gcode_macro BMC]
gcode:
    # Shortcut for BED_MESH_CALIBRATE
    {% set bedtemp = params.BED|default(65)|int %}
    {% set extrudertemp = params.EXTRUDER|default(150)|int %}
    {% set profile = params.PROFILE|default("default")|string %}

    BED_MESH_CALIBRATE BED={bedtemp} EXTRUDER={extrudertemp} PROFILE={profile}
